# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- Added support for using Python type objects instead of serializer fields in schema generation code ([#106](https://github.com/dabapps/django-readers/pull/106))
- Added Django 5.2 and Python 3.13 to test matrix ([#107](https://github.com/dabapps/django-readers/pull/107))

## [2.3.0] - 2024-04-17

### Added
- Added support for overriding field kwargs for autogenerated serializer fields via `out` mechanism ([#99](https://github.com/dabapps/django-readers/pull/99)).

## [2.2.0] - 2024-01-12

### Added
- Added support for Django's reverse generic relations (`GenericRelation` model field) ([#93](https://github.com/dabapps/django-readers/pull/93)).

### Changed
- Add support for Django 5.0

## [2.1.2] - 2023-07-17

### Fixed
- Fix an error when using the `@out` decorator on producer functions that return values like booleans, that can't have arbitrary attributes added to them ([#86](https://github.com/dabapps/django-readers/issues/86)).

### Changed
- Add support for Django 4.2
- Drop support for Python 3.7

## [2.1.1] - 2023-03-21

### Fixed
- Correctly set the allow_null attribute on nested serializers ([#81](https://github.com/dabapps/django-readers/issues/81))

## [2.1.0] - 2023-01-13

### Changed
- Add support for Django 4.1
- Drop support for Django 2.2
- Add support for Python 3.11
- Drop support for Python 3.6

### Added
- In the Django REST framework layer, callables in a spec are now automatically called and passed the `request` object ([#76](https://github.com/dabapps/django-readers/pull/76))
- Support for generating a Django REST framework serializer from a spec, and for annotating custom pairs in a spec with their output field types. This enables automatic schema generation. ([#76](https://github.com/dabapps/django-readers/pull/76))

## [2.0.0] - 2022-07-19

### Changed
- **BACKWARDS INCOMPATIBLE**: The default value of the `distinct` argument for the `pairs.count` and `pairs.has` functions has changed from `True` to `False`. This now matches the default value of the `distinct` arguments to Django's `Count` annotation. To retain current behaviour, add `distinct=True` to all calls to these two functions in your codebase. For background on this decision, see [this discussion](https://github.com/dabapps/django-readers/discussions/66).

### Added
- Proper documentation! [https://www.django-readers.org](https://www.django-readers.org)
- New `pairs.annotate` function allowing you to annotate a queryset with aggregates, functions etc and produce the result.
- New `pairs.sum` function to annotate a queryset with the `Sum` aggregate function and produce the result.

## [1.1.0] - 2022-02-23

### Added
- New `pairs.discard_queryset_function` and `pairs.discard_projector` functions to discard one or other item in a reader pair.

### Changed
- `SpecMixin` now applies prepare function in `get_queryset`, not `filter_queryset`

## [1.0.0] - 2021-10-13

Initial stable release.
